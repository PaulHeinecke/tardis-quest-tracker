<!DOCTYPE html>  
<html lang="de">  
<head>  
  <meta charset="UTF-8">  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">  
  <title>TARDIS Quest Tracker</title>  
  <style>  
    :root {  
      --tardis-blue: #003b6f;  
      --tardis-dark-blue: #00254a;  
      --light-blue: #add8e6;  
      --text-color: #fff;  
      --accent-yellow: #f0c75e;  
      --accent-gold: #ffd700;  
    }  
    
    body {  
      font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;  
      background-color: var(--tardis-dark-blue);  
      background-image: linear-gradient(135deg, var(--tardis-dark-blue) 0%, #0a1128 100%);  
      color: var(--text-color);  
      line-height: 1.6;  
      margin: 0;  
      padding: 0;  
      min-height: 100vh;  
    }  
    
    .container {  
      max-width: 1200px;  
      margin: 0 auto;  
      padding: 0 20px;  
    }  
    
    header {  
      background-color: var(--tardis-blue);  
      padding: 15px 0;  
      border-bottom: 4px solid var(--accent-yellow);  
      position: relative;  
      overflow: hidden;  
    }  
    
    .header-content {  
      display: flex;  
      align-items: center;  
      position: relative;  
      z-index: 2;  
    }  
    
    .tardis-box {  
      width: 60px;  
      height: 80px;  
      background-color: var(--tardis-blue);  
      border: 2px solid white;  
      position: relative;  
      margin-right: 20px;  
      flex-shrink: 0;  
      border-radius: 2px;  
    }  
    
    .tardis-sign {  
      position: absolute;  
      width: 100%;  
      background-color: white;  
      color: var(--tardis-blue);  
      text-align: center;  
      padding: 2px 0;  
      font-weight: bold;  
      font-size: 8px;  
    }  
    
    .tardis-sign.top {  
      top: 0;  
    }  
    
    .tardis-sign.bottom {  
      bottom: 0;  
    }  
    
    .tardis-windows {  
      display: grid;  
      grid-template-columns: 1fr 1fr;  
      gap: 5px;  
      padding: 5px;  
      position: absolute;  
      top: 20px;  
      left: 0;  
      right: 0;  
    }  
    
    .tardis-window {  
      height: 10px;  
      background-color: white;  
    }  
    
    h1 {  
      margin: 0;  
      font-size: 28px;  
    }  
    
    .points-container {  
      background: linear-gradient(135deg, var(--tardis-blue), #0a2472);  
      padding: 20px;  
      border-radius: 8px;  
      margin: 30px 0;  
      display: flex;  
      justify-content: space-between;  
      align-items: center;  
      border: 1px solid rgba(255, 255, 255, 0.1);  
    }  
    
    .points-info h2 {  
      margin-top: 0;  
      margin-bottom: 5px;  
    }  
    
    .points-info p {  
      margin: 0;  
      opacity: 0.8;  
      font-size: 14px;  
    }  
    
    .points-counters {  
      display: flex;  
      gap: 20px;  
    }  
    
    .points-counter {  
      text-align: center;  
    }  
    
    .points-label {  
      font-size: 12px;  
      opacity: 0.8;  
    }  
    
    .points-value {  
      font-size: 28px;  
      font-weight: bold;  
    }  
    
    .total-points {  
      color: var(--accent-gold);  
    }  
    
    .available-points {  
      color: #27ae60;  
    }  
    
    .milestones {  
      margin-top: 40px;  
    }  
    
    .milestone {  
      background-color: rgba(0, 59, 111, 0.5);  
      border-radius: 8px;  
      padding: 20px;  
      margin-bottom: 20px;  
      border: 1px solid rgba(255, 255, 255, 0.1);  
      display: flex;  
      flex-direction: column;  
    }  
    
    .milestone-header {  
      display: flex;  
      align-items: center;  
    }  
    
    .milestone-icon {  
      font-size: 2rem;  
      margin-right: 15px;  
      color: var(--accent-yellow);  
    }  
    
    .milestone-name {  
      font-weight: bold;  
      font-size: 18px;  
      margin-right: 15px;  
    }  
    
    .milestone-points {  
      background-color: rgba(0, 0, 0, 0.2);  
      padding: 5px 10px;  
      border-radius: 20px;  
      font-size: 14px;  
      margin-left: auto;  
    }  
    
    .milestone-lock {  
      display: inline-block;  
      margin-left: 10px;  
      color: var(--accent-yellow);  
    }  
    
    .milestone-reward {  
      margin-top: 15px;  
      padding: 12px;  
      background-color: rgba(0, 0, 0, 0.2);  
      border-radius: 6px;  
      font-style: italic;  
      display: none;  
    }  
    
    /* F√ºr freigeschaltete Meilensteine */  
    .milestone.unlocked {  
      border-color: var(--accent-gold);  
    }  
    
    .milestone.unlocked .milestone-name {  
      color: var(--accent-gold);  
    }  
    
    .milestone.unlocked .milestone-reward {  
      display: block;  
      border-left: 3px solid var(--accent-gold);  
    }  
    
    .milestone.unlocked .milestone-lock {  
      display: none;  
    }  
    
    .nav-buttons {  
      display: flex;  
      justify-content: center;  
      margin-top: 30px;  
      margin-bottom: 50px;  
    }  
    
    button {  
      padding: 12px 20px;  
      background-color: var(--tardis-blue);  
      color: white;  
      border: none;  
      border-radius: 5px;  
      cursor: pointer;  
      font-size: 16px;  
      border: 1px solid var(--accent-yellow);  
      transition: all 0.2s;  
    }  
    
    button:hover {  
      background-color: var(--tardis-dark-blue);  
      border-color: var(--accent-gold);  
    }  
    
    footer {  
      text-align: center;  
      padding: 20px 0;  
      margin-top: 50px;  
      border-top: 1px solid rgba(255, 255, 255, 0.1);  
      font-size: 14px;  
      color: rgba(255, 255, 255, 0.6);  
    }  
    
    footer p {  
      margin: 5px 0;  
    }  
  </style>  
</head>  
<body>  
  <header>  
    <div class="container">  
      <div class="header-content">  
        <div class="tardis-box">  
          <div class="tardis-sign top">POLICE</div>  
          <div class="tardis-windows">  
            <div class="tardis-window"></div>  
            <div class="tardis-window"></div>  
            <div class="tardis-window"></div>  
            <div class="tardis-window"></div>  
          </div>  
          <div class="tardis-sign bottom">BOX</div>  
        </div>  
        <h1>TARDIS Quest Tracker</h1>  
      </div>  
    </div>  
  </header>  
  
  <main class="container">  
    <div class="points-container">  
      <div class="points-info">  
        <h2>Dein Fortschritt</h2>  
        <p>Sammle Punkte und schalte Belohnungen frei</p>  
      </div>  
      <div class="points-counters">  
        <div class="points-counter">  
          <div class="points-label">Gesamtpunkte</div>  
          <div class="points-value total-points" id="totalPoints">0</div>  
        </div>  
        <div class="points-counter">  
          <div class="points-label">Verf√ºgbare Punkte</div>  
          <div class="points-value available-points" id="availablePoints">0</div>  
        </div>  
      </div>  
    </div>  
  
    <h2>Deine Meilensteine</h2>  
  
    <div class="milestones">  
      <div class="milestone" data-points="400" id="milestone-1">  
        <div class="milestone-header">  
          <div class="milestone-icon">üèÜ</div>  
          <div class="milestone-name">FIGURENJ√ÑGER ANF√ÑNGER <span class="milestone-lock">üîí</span></div>  
          <div class="milestone-points">400 Punkte</div>  
        </div>  
        <div class="milestone-reward">Belohnung: Ein neues Kapitel f√ºr dein Abenteuer!</div>  
      </div>  
      
      <div class="milestone" data-points="800" id="milestone-2">  
        <div class="milestone-header">  
          <div class="milestone-icon">üèÜ</div>  
          <div class="milestone-name">FIGURENJ√ÑGER FORTGESCHRITTEN <span class="milestone-lock">üîí</span></div>  
          <div class="milestone-points">800 Punkte</div>  
        </div>  
        <div class="milestone-reward">Belohnung: Freischaltung einer neuen Figuren-Kategorie!</div>  
      </div>  
      
      <div class="milestone" data-points="1200" id="milestone-3">  
        <div class="milestone-header">  
          <div class="milestone-icon">üèÜ</div>  
          <div class="milestone-name">FIGURENJ√ÑGER PROFI <span class="milestone-lock">üîí</span></div>  
          <div class="milestone-points">1200 Punkte</div>  
        </div>  
        <div class="milestone-reward">Belohnung: Ein Geheimnis wird gel√ºftet!</div>  
      </div>  
    </div>  
  
    <div class="nav-buttons">  
      <button onclick="location.href='elephants.html'">Zur Elefantensammlung</button>  
    </div>  
  </main>  
  
  <footer>  
    <div class="container">  
      <p>TARDIS Quest Tracker ‚Ä¢ Version 1.0</p>  
      <p>Geronimo!</p>  
    </div>  
  </footer>  
  
  <script>  
    // Variablen f√ºr die Punkte  
    let totalPoints = 0;  
    let availablePoints = 0;  
    
    // Funktion zum Aktualisieren der Punkte-Anzeige  
    function updatePoints() {  
      document.getElementById('totalPoints').textContent = totalPoints;  
      document.getElementById('availablePoints').textContent = availablePoints;  
      
      // Aktualisiere Meilensteine  
      const milestones = document.querySelectorAll('.milestone');  
      console.log("Pr√ºfe Meilensteine mit", totalPoints, "Punkten");  
      
      milestones.forEach(milestone => {  
        const requiredPoints = parseInt(milestone.getAttribute('data-points') || '0');  
        console.log("Meilenstein", milestone.id, "ben√∂tigt", requiredPoints, "Punkte");  
        
        if (totalPoints >= requiredPoints) {  
          milestone.classList.add('unlocked');  
          console.log("Meilenstein", milestone.id, "freigeschalten!");  
        } else {  
          milestone.classList.remove('unlocked');  
          console.log("Meilenstein", milestone.id, "noch gesperrt");  
        }  
      });  
    }  
    
    // Funktion zum Laden der Punkte aus dem localStorage  
    function loadPoints() {  
      // Pr√ºfe auf m√∂gliche Schl√ºsselnamen f√ºr Elefantenpunkte  
      const keysToCheck = [  
        'elephantsTotal', 'elephantsAvailable',  // Fr√ºher genutzte Keys  
        'elephantPoints', 'totalPoints',         // Allgemeine Keys  
        'elephantsData'                          // JSON-Daten Key  
      ];  
      
      console.log("Suche nach gespeicherten Elefantenpunkten...");  
      
      // Versuche, Elefanten-JSON-Daten zu laden  
      const elephantsDataStr = localStorage.getItem('elephantsData');  
      if (elephantsDataStr) {  
        try {  
          const elephantsData = JSON.parse(elephantsDataStr);  
          // Wenn es eine totalPoints-Eigenschaft in den Daten gibt  
          if (elephantsData && elephantsData.totalPoints !== undefined) {  
            totalPoints = elephantsData.totalPoints;  
            availablePoints = elephantsData.availablePoints || totalPoints;  
            console.log("Punkte aus elephantsData JSON geladen:", totalPoints, availablePoints);  
          }  
        } catch (e) {  
          console.log("Fehler beim Parsen der Elefantendaten:", e);  
        }  
      }  
      
      // Wenn keine Punkte aus JSON-Daten geladen wurden, pr√ºfe alle anderen Keys  
      if (totalPoints === 0) {  
        // Durchsuche alle localStorage-Eintr√§ge nach elephant-bezogenen Punkten  
        for (let i = 0; i < localStorage.length; i++) {  
          const key = localStorage.key(i);  
          if (key && key.toLowerCase().includes('elephant') && key.toLowerCase().includes('point')) {  
            const value = parseInt(localStorage.getItem(key) || '0');  
            if (value > 0) {  
              console.log("Gefunden:", key, "=", value);  
              if (key.toLowerCase().includes('total') || key.toLowerCase().includes('gesamt')) {  
                totalPoints = value;  
              } else if (key.toLowerCase().includes('available') || key.toLowerCase().includes('verf√ºgbar')) {  
                availablePoints = value;  
              }  
            }  
          }  
        }  
        
        // Wenn immer noch keine Punkte gefunden wurden, nimm die regul√§ren  
        if (totalPoints === 0) {  
          totalPoints = parseInt(localStorage.getItem('totalPoints') || '0');  
          availablePoints = parseInt(localStorage.getItem('availablePoints') || '0');  
          console.log("Regul√§re Punkte geladen:", totalPoints, availablePoints);  
        } else {  
          console.log("Elefantenpunkte geladen:", totalPoints, availablePoints);  
        }  
      }  
      
      // Stelle sicher, dass verf√ºgbare Punkte nicht mehr als Gesamtpunkte sind  
      if (availablePoints > totalPoints) {  
        availablePoints = totalPoints;  
      }  
      
      // Aktualisiere die Anzeige  
      updatePoints();  
    }  
    
    // Funktion zum Aktualisieren der Punkte von der Elefantenseite  
    function updatePointsFromElephants(newTotalPoints, newAvailablePoints) {  
      console.log("Punkte von Elefanten erhalten:", newTotalPoints, newAvailablePoints);  
      
      // Konvertiere zu Zahlen f√ºr den Fall, dass Strings √ºbergeben werden  
      totalPoints = parseInt(newTotalPoints) || 0;  
      availablePoints = parseInt(newAvailablePoints) || 0;  
      
      // Speichere die Punkte mit verschiedenen Keys, um Kompatibilit√§t zu gew√§hrleisten  
      localStorage.setItem('totalPoints', totalPoints);  
      localStorage.setItem('availablePoints', availablePoints);  
      localStorage.setItem('elephantPoints', totalPoints);  // Zus√§tzlicher Key f√ºr bessere Erkennung  
      
      // Aktualisiere die Anzeige  
      updatePoints();  
    }  
    
    // Lade die Punkte beim Seitenstart  
    document.addEventListener('DOMContentLoaded', function() {  
      console.log("Seite geladen, lade Punkte...");  
      loadPoints();  
    });  
  </script>  
</body>  
</html>
